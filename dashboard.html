<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Dashboard — SafeBridge Transfer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="site-header">
    <div class="inner">
      <div class="brand"><div class="brand-mark">SB</div>SafeBridge Transfer</div>
      <nav>
        <a class="nav-link" href="dashboard.html">Dashboard</a>
        <a class="nav-link" href="#activity">Activity</a>
        <a class="nav-link" href="#recipients">Recipients</a>
      </nav>
      <div class="nav-secondary">
        <span class="pill">Demo mode</span>
        <a class="nav-login" href="signin.html">Log out</a>
      </div>
    </div>
  </div>

  <div class="shell" style="margin-top:1.25rem;">
    <header class="dashboard-header">
      <div>
        <div class="eyebrow">Welcome back</div>
        <h1>Send money in minutes</h1>
        <p class="hero-subtitle">Review your balances, start a transfer, and track recent activity.</p>
      </div>
      <div class="header-actions">
        <a class="btn-primary" href="#new-transfer">New transfer</a>
        <a class="btn-ghost" href="id-verify.html">ID verification <span class="pill muted" style="margin-left:0.35rem;">Pending</span></a>
      </div>
    </header>

    <section class="dashboard-grid">
      <div class="card stat-card">
        <div class="card-title">Verification</div>
        <div class="stat-value">Email verified</div>
        <div class="stat-hint">Phone on file • ID pending</div>
      </div>
      <div class="card stat-card">
        <div class="card-title">History</div>
        <div class="stat-value">3 recent transfers</div>
        <div class="stat-hint"><a class="link" href="#activity">View full history</a></div>
      </div>
      <div class="card stat-card">
        <div class="card-title">Track a transfer</div>
        <div class="stat-hint">Use your tracking number to see status below.</div>
      </div>
    </section>

    <section class="dashboard-main" id="new-transfer">
      <div class="card transfer-card">
        <div class="card-header">
          <div>
            <div class="card-title">Start a transfer</div>
            <div class="card-subtitle">Canada → Myanmar</div>
          </div>
          <div class="pill">Demo</div>
        </div>
        <div class="form-columns-2">
          <label class="field">
            <span>Receiver’s country</span>
            <div class="select">
              <select id="dash-country">
                <option value="mm">Myanmar (CAD → MMK)</option>
                <option value="ca">Canada (MMK → CAD)</option>
              </select>
              <span class="chevron">⌄</span>
            </div>
          </label>
        </div>

        <div class="form-columns-2">
          <label class="field">
            <span>Send amount</span>
            <div class="input-with-chip">
              <span class="chip" id="dash-send-chip">CAD</span>
              <input type="number" min="0" step="0.01" placeholder="500.00" id="dash-send" />
            </div>
          </label>
          <label class="field">
            <span>Receive amount</span>
            <div class="input-with-chip">
              <span class="chip" id="dash-receive-chip">MMK</span>
              <input type="number" min="0" step="100" placeholder="825,000" id="dash-receive" />
            </div>
          </label>
        </div>
        <div class="form-columns-2">
          <label class="field">
            <span>Select recipient</span>
            <select id="dash-recipient-select">
              <option value="new">Add new recipient</option>
              <option value="ko-aung">Ko Aung • KBZ • ****2211</option>
              <option value="ma-thazin">Ma Thazin • AYA • ****9898</option>
            </select>
          </label>
          <label class="field">
            <span>Payout method</span>
            <select id="dash-payout">
              <option value="bank">Bank account</option>
              <option value="wallet">Mobile wallet</option>
            </select>
          </label>
        </div>

        <div class="form-columns-2 conditional-group" id="recipient-fields">
          <label class="field">
            <span>Recipient name</span>
            <input type="text" id="dash-recipient" placeholder="Full name" />
          </label>
          <label class="field">
            <span>Relationship to receiver</span>
            <select id="dash-relationship">
              <option>Family</option>
              <option>Friend</option>
              <option>Business</option>
              <option>Self</option>
            </select>
          </label>
        </div>

        <div class="form-columns-2 conditional-group hidden" id="bank-fields">
          <label class="field">
            <span>Bank name</span>
            <select id="dash-bank"></select>
          </label>
          <label class="field">
            <span>Bank account number</span>
            <input type="text" id="dash-bank-account" placeholder="XXXXXXXXXX" />
          </label>
        </div>

        <div class="form-columns-2 conditional-group hidden" id="wallet-fields">
          <label class="field">
            <span>Wallet</span>
            <select id="dash-wallet">
              <option>KPAY</option>
              <option>AYAPAY</option>
            </select>
          </label>
          <label class="field">
            <span>Wallet phone</span>
            <input type="tel" id="dash-wallet-phone" placeholder="09xxxxxxx" />
          </label>
        </div>
        <div class="form-columns-2">
          <label class="field">
            <span>Pay with</span>
            <select id="dash-paywith">
              <option value="ca-rbc">RBC • ****1234 (bank)</option>
              <option value="ca-td">TD • ****7788 (bank)</option>
              <option value="ca-visa">Visa • ****4455 (card)</option>
              <option value="mm-kbz">KBZ • ****1234 (bank)</option>
              <option value="mm-aya">AYA • ****81234 (bank)</option>
              <option value="mm-cb">CB • ****91234 (bank)</option>
              <option value="add">Add new funding account…</option>
            </select>
          </label>
          <label class="field">
            <span>Purpose of transfer</span>
            <select>
              <option>Family support</option>
              <option>Education</option>
              <option>Medical</option>
              <option>Other</option>
            </select>
          </label>
          <label class="field">
            <span>Source of funds</span>
            <select id="dash-funds">
              <option>Salary</option>
              <option>Savings</option>
              <option>Business income</option>
              <option>Loan</option>
              <option>Other</option>
            </select>
          </label>
        </div>
        <div class="rate-row" id="dash-rate-row">
          <div>Rate: <strong id="dash-rate">1 CAD ≈ 1,650 MMK</strong></div>
          <div>Est. arrival: <strong id="dash-arrival">Today</strong></div>
        </div>

        <a class="btn-primary block" href="id-verify.html">Start transfer</a>
      </div>

      <div class="card activity-card" id="activity">
        <div class="card-header">
          <div>
            <div class="card-title">History & tracking</div>
            <div class="card-subtitle">See recent transfers or track a specific one.</div>
          </div>
          <a class="link" href="#">View all</a>
        </div>

        <div class="track-box">
          <label class="field" style="margin-bottom:0.5rem;">
            <span>Tracking number</span>
            <input type="text" placeholder="e.g., SB-12345678" />
          </label>
          <a class="btn-primary block" href="track.html">Track transfer</a>
        </div>

        <div class="card-subtitle" style="margin-top:0.75rem;">Recent activity</div>
        <ul class="activity-list">
          <li>
            <div>
              <div class="activity-title">$750 CAD → MMK</div>
              <div class="activity-meta">Ko Aung • Bank transfer • Completed</div>
            </div>
            <span class="pill">Yesterday</span>
          </li>
          <li>
            <div>
              <div class="activity-title">$300 CAD → MMK</div>
              <div class="activity-meta">Ma Thazin • Wallet • Delivered</div>
            </div>
            <span class="pill">2 days ago</span>
          </li>
          <li>
            <div>
              <div class="activity-title">Profile updated</div>
              <div class="activity-meta">Contact info refreshed</div>
            </div>
            <span class="pill muted">This week</span>
          </li>
        </ul>
      </div>

      <div class="card activity-card" id="recipients">
        <div class="card-header">
          <div>
            <div class="card-title">Recipients</div>
            <div class="card-subtitle">Manage saved recipients and payout details.</div>
          </div>
          <a class="link" href="#new-transfer">Use in transfer</a>
        </div>
        <ul class="activity-list">
          <li>
            <div>
              <div class="activity-title">Ko Aung</div>
              <div class="activity-meta">KBZ • ****2211 • Bank</div>
            </div>
            <span class="pill muted">Saved</span>
          </li>
          <li>
            <div>
              <div class="activity-title">Ma Thazin</div>
              <div class="activity-meta">AYAPAY • 09xxxxxxx • Wallet</div>
            </div>
            <span class="pill muted">Saved</span>
          </li>
        </ul>
        <div class="card-subtitle" style="margin-top:0.75rem;">Add new recipient</div>
        <div class="form-columns-2">
          <label class="field">
            <span>Name</span>
            <input type="text" placeholder="Full name" />
          </label>
          <label class="field">
            <span>Payout method</span>
            <select>
              <option>Bank</option>
              <option>Wallet</option>
            </select>
          </label>
        </div>
        <div class="form-columns-2">
          <label class="field">
            <span>Bank / Wallet</span>
            <input type="text" placeholder="KBZ / KPAY" />
          </label>
          <label class="field">
            <span>Account / Phone</span>
            <input type="text" placeholder="Account number or wallet phone" />
          </label>
        </div>
        <button class="btn-primary block" type="button">Save recipient</button>
      </div>
    </section>
  </div>
</body>
<script>
  // Demo: swap currency labels when changing corridor (matches home page behavior)
  const countrySel = document.getElementById('dash-country');
  const sendChip = document.getElementById('dash-send-chip');
  const receiveChip = document.getElementById('dash-receive-chip');
  const rateLabel = document.getElementById('dash-rate');
  const payoutSel = document.getElementById('dash-payout');
  const bankFields = document.getElementById('bank-fields');
  const walletFields = document.getElementById('wallet-fields');
  const payWithSel = document.getElementById('dash-paywith');
  const bankSelect = document.getElementById('dash-bank');
  const recipientSel = document.getElementById('dash-recipient-select');
  const recipientFields = document.getElementById('recipient-fields');

  const setBankOptions = (isToMM) => {
    const opts = isToMM
      ? [
          ['rbc', 'RBC'],
          ['td', 'TD'],
          ['bmo', 'BMO'],
          ['scotia', 'Scotiabank'],
        ]
      : [
          ['kbz', 'KBZ'],
          ['aya', 'AYA'],
          ['cb', 'CB'],
        ];
    bankSelect.innerHTML = opts.map(([v, l]) => `<option value="${v}">${l}</option>`).join('');
  };

  const updateFields = () => {
    const corridor = countrySel?.value;
    const payout = payoutSel?.value;
    const payWith = payWithSel?.value || '';
    const isToMM = corridor === 'mm';
    const isToCA = corridor === 'ca';

    sendChip.textContent = isToMM ? 'CAD' : 'MMK';
    receiveChip.textContent = isToMM ? 'MMK' : 'CAD';
    rateLabel.textContent = isToMM ? '1 CAD ≈ 1,650 MMK' : '1 MMK ≈ 0.00060 CAD';

    // Show bank/wallet fields only when sending MMK -> CAD
    if ((isToCA || isToMM) && payout === 'bank') {
      bankFields.classList.remove('hidden');
      walletFields.classList.add('hidden');
      setBankOptions(isToMM);
    } else if (isToCA && payout === 'wallet') {
      walletFields.classList.remove('hidden');
      bankFields.classList.add('hidden');
    } else {
      bankFields.classList.add('hidden');
      walletFields.classList.add('hidden');
    }

    // Filter Pay with options depending on corridor
    if (isToMM) {
      // CAD -> MMK: show Canada funding options
      Array.from(payWithSel.options).forEach(opt => {
        const isCA = opt.value.startsWith('ca-') || opt.value === 'add';
        opt.hidden = !isCA;
      });
      if (payWithSel.value && payWithSel.options[payWithSel.selectedIndex].hidden) {
        payWithSel.value = 'ca-rbc';
      }
    } else if (isToCA) {
      // MMK -> CAD: show Myanmar funding options
      Array.from(payWithSel.options).forEach(opt => {
        const isMM = opt.value.startsWith('mm-') || opt.value === 'add';
        opt.hidden = !isMM;
      });
      if (payWithSel.value && payWithSel.options[payWithSel.selectedIndex].hidden) {
        payWithSel.value = 'mm-kbz';
      }
    }

    // Recipient fields hidden when selecting existing
    if (recipientSel && recipientFields) {
      if (recipientSel.value === 'new') {
        recipientFields.classList.remove('hidden');
      } else {
        recipientFields.classList.add('hidden');
      }
    }
  };

  countrySel?.addEventListener('change', updateFields);
  payoutSel?.addEventListener('change', updateFields);
  payWithSel?.addEventListener('change', updateFields);
  recipientSel?.addEventListener('change', updateFields);
  updateFields();
</script>
</html>
